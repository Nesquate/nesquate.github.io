<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>不在分割表上的 ext4 | 美代子隨筆</title><meta name=keywords content="Records"><meta name=description content="我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。
最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。
因為自己不記得自己曾經幹了啥事，所以直接回到 Linux 去看發生什麼事。
首先是 GParted，發現怎麼縮小分割，最後都會變成最大（嘗試 e2fsck 後都會跑 resize2fs，超怪），然後就跑去 Google 一下 ext4 without partition table 的狀況，找到這篇 StackExchange，裡面的最佳解答如下：
Creating a filesystem on a whole disk rather than a partition is possible, but unusual. The documentation only explicitly mentions the partition because that&rsquo;s the most usual case (it does say usually). You can create a filesystem on anything that acts sufficiently like a fixed-size file, i."><meta name=author content="Nesquate"><link rel=canonical href=https://nesquate.tw/blog/posts/%E4%B8%8D%E5%9C%A8%E5%88%86%E5%89%B2%E8%A1%A8%E4%B8%8A%E7%9A%84-ext4/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://nesquate.tw/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nesquate.tw/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nesquate.tw/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://nesquate.tw/blog/apple-touch-icon.png><link rel=mask-icon href=https://nesquate.tw/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="不在分割表上的 ext4"><meta property="og:description" content="我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。
最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。
因為自己不記得自己曾經幹了啥事，所以直接回到 Linux 去看發生什麼事。
首先是 GParted，發現怎麼縮小分割，最後都會變成最大（嘗試 e2fsck 後都會跑 resize2fs，超怪），然後就跑去 Google 一下 ext4 without partition table 的狀況，找到這篇 StackExchange，裡面的最佳解答如下：
Creating a filesystem on a whole disk rather than a partition is possible, but unusual. The documentation only explicitly mentions the partition because that&rsquo;s the most usual case (it does say usually). You can create a filesystem on anything that acts sufficiently like a fixed-size file, i."><meta property="og:type" content="article"><meta property="og:url" content="https://nesquate.tw/blog/posts/%E4%B8%8D%E5%9C%A8%E5%88%86%E5%89%B2%E8%A1%A8%E4%B8%8A%E7%9A%84-ext4/"><meta property="og:image" content="https://nesquate.tw/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-21T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-21T00:00:00+00:00"><meta property="og:site_name" content="美代子隨筆"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nesquate.tw/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="不在分割表上的 ext4"><meta name=twitter:description content="我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。
最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。
因為自己不記得自己曾經幹了啥事，所以直接回到 Linux 去看發生什麼事。
首先是 GParted，發現怎麼縮小分割，最後都會變成最大（嘗試 e2fsck 後都會跑 resize2fs，超怪），然後就跑去 Google 一下 ext4 without partition table 的狀況，找到這篇 StackExchange，裡面的最佳解答如下：
Creating a filesystem on a whole disk rather than a partition is possible, but unusual. The documentation only explicitly mentions the partition because that&rsquo;s the most usual case (it does say usually). You can create a filesystem on anything that acts sufficiently like a fixed-size file, i."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nesquate.tw/blog/posts/"},{"@type":"ListItem","position":3,"name":"不在分割表上的 ext4","item":"https://nesquate.tw/blog/posts/%E4%B8%8D%E5%9C%A8%E5%88%86%E5%89%B2%E8%A1%A8%E4%B8%8A%E7%9A%84-ext4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"不在分割表上的 ext4","name":"不在分割表上的 ext4","description":"我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。\n最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。\n因為自己不記得自己曾經幹了啥事，所以直接回到 Linux 去看發生什麼事。\n首先是 GParted，發現怎麼縮小分割，最後都會變成最大（嘗試 e2fsck 後都會跑 resize2fs，超怪），然後就跑去 Google 一下 ext4 without partition table 的狀況，找到這篇 StackExchange，裡面的最佳解答如下：\nCreating a filesystem on a whole disk rather than a partition is possible, but unusual. The documentation only explicitly mentions the partition because that\u0026rsquo;s the most usual case (it does say usually). You can create a filesystem on anything that acts sufficiently like a fixed-size file, i.","keywords":["Records"],"articleBody":"我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。\n最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。\n因為自己不記得自己曾經幹了啥事，所以直接回到 Linux 去看發生什麼事。\n首先是 GParted，發現怎麼縮小分割，最後都會變成最大（嘗試 e2fsck 後都會跑 resize2fs，超怪），然後就跑去 Google 一下 ext4 without partition table 的狀況，找到這篇 StackExchange，裡面的最佳解答如下：\nCreating a filesystem on a whole disk rather than a partition is possible, but unusual. The documentation only explicitly mentions the partition because that’s the most usual case (it does say usually). You can create a filesystem on anything that acts sufficiently like a fixed-size file, i.e. something where if you write data at a certain location and read back from the same location then you get back the same data. This includes whole disks, disk partitions, and other kinds of block devices, as well as regular files (disk images).\nAfter doing mkfs.fat -n A /dev/sdb, you no longer have a partition on that disk. Beware that the kernel still thinks that the disk has a partition, because it keeps the partition table cached in memory. But you shouldn’t try to use /dev/sdb1 anymore, since it no longer exists; writing to it would corrupt the filesystem you created on /dev/sdb since /dev/sdb1 is a part of /dev/sdb (everything except a few hundred bytes at the beginning). Run the command partprobe as root to tell the kernel to re-read the partition table.\nWhile creating a filesystem on a whole disk is possible, I don’t recommend it. Some operating systems may have problems with it (I think Windows would cope but some devices such as cameras might not), and you lose the possibility of creating other partitions. See also The merits of a partitionless filesystem\n再點進去解答者提供的連結，看了一下，原來 Oracle VM 也這樣幹…。\n後來去 lsblk 看一下，sda 後面沒號碼是直接整個掛起來的：\n然後再去 /etc/fstab 看一下，因為我當初直接用 GNOME 提供的磁碟工具來掛載，不知道裡面寫了啥，所以要檢查一下：\n好吧，當初用 UUID 的方式掛起來。不過我對我當初怎麼分割成這樣已經完全沒有任何印象了 lol\n","wordCount":"275","inLanguage":"en","datePublished":"2022-08-21T00:00:00Z","dateModified":"2022-08-21T00:00:00Z","author":{"@type":"Person","name":"Nesquate"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nesquate.tw/blog/posts/%E4%B8%8D%E5%9C%A8%E5%88%86%E5%89%B2%E8%A1%A8%E4%B8%8A%E7%9A%84-ext4/"},"publisher":{"@type":"Organization","name":"美代子隨筆","logo":{"@type":"ImageObject","url":"https://nesquate.tw/blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nesquate.tw/blog accesskey=h title="美代子隨筆 (Alt + H)"><img src=https://nesquate.tw/blog/apple-touch-icon.png alt aria-label=logo height=35>美代子隨筆</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nesquate.tw/blog/archives/ title=彙整><span>彙整</span></a></li><li><a href=https://nesquate.tw/blog/categories/ title=分類><span>分類</span></a></li><li><a href=https://nesquate.tw/blog/tags/ title=標籤><span>標籤</span></a></li><li><a href=https://nesquate.tw/blog/about/ title=關於><span>關於</span></a></li><li><a href=https://nesquate.tw/blog/search/ title="搜尋 (Alt + /)" accesskey=/><span>搜尋</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>不在分割表上的 ext4</h1><div class=post-meta><span title='2022-08-21 00:00:00 +0000 UTC'>August 21, 2022</span>&nbsp;·&nbsp;Nesquate</div></header><div class=post-content><p>我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。</p><p>最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。</p><p>因為自己不記得自己曾經幹了啥事，所以直接回到 Linux 去看發生什麼事。</p><p>首先是 GParted，發現怎麼縮小分割，最後都會變成最大（嘗試 e2fsck 後都會跑 resize2fs，超怪），然後就跑去 Google 一下 ext4 without partition table 的狀況，找到這篇 <a href=https://unix.stackexchange.com/questions/346826/is-it-ok-to-mkfs-without-partition-number title=StackExchange>StackExchange</a>，裡面的最佳解答如下：</p><blockquote><p>Creating a filesystem on a whole disk rather than a partition is possible, but unusual. The documentation only explicitly mentions the partition because that&rsquo;s the most usual case (it does say usually). You can create a filesystem on anything that acts sufficiently like a fixed-size file, i.e. something where if you write data at a certain location and read back from the same location then you get back the same data. This includes whole disks, disk partitions, and other kinds of block devices, as well as regular files (disk images).</p><p>After doing mkfs.fat -n A /dev/sdb, you no longer have a partition on that disk. Beware that the kernel still thinks that the disk has a partition, because it keeps the partition table cached in memory. But you shouldn&rsquo;t try to use /dev/sdb1 anymore, since it no longer exists; writing to it would corrupt the filesystem you created on /dev/sdb since /dev/sdb1 is a part of /dev/sdb (everything except a few hundred bytes at the beginning). Run the command partprobe as root to tell the kernel to re-read the partition table.</p><p>While creating a filesystem on a whole disk is possible, I don&rsquo;t recommend it. Some operating systems may have problems with it (I think Windows would cope but some devices such as cameras might not), and you lose the possibility of creating other partitions. See also <a href=https://unix.stackexchange.com/questions/14010/the-merits-of-a-partitionless-filesystem>The merits of a partitionless filesystem</a></p></blockquote><p>再點進去解答者提供的連結，看了一下，原來 Oracle VM 也這樣幹&mldr;。</p><p>後來去 <code>lsblk</code> 看一下，<code>sda</code> 後面沒號碼是直接整個掛起來的：</p><p><img loading=lazy src=/blog/img/2022/08/Screenshot_20220821_200036.png alt></p><p>然後再去 <code>/etc/fstab</code> 看一下，因為我當初直接用 GNOME 提供的磁碟工具來掛載，不知道裡面寫了啥，所以要檢查一下：</p><p><img loading=lazy src=/blog/img/2022/08/Screenshot_20220821_200154.png alt></p><p>好吧，當初用 UUID 的方式掛起來。不過我對我當初怎麼分割成這樣已經完全沒有任何印象了 lol</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://nesquate.tw/blog/tags/records/>Records</a></li></ul><nav class=paginav><a class=prev href=https://nesquate.tw/blog/posts/2022-10-10-debian%E5%BE%9Esid%E5%88%B0experimental%E5%88%B0linux-6-0-rc/><span class=title>« Prev</span><br><span>Debian 從 sid 到 Experimental 到 Linux 6.0 RC</span></a>
<a class=next href=https://nesquate.tw/blog/posts/minecraft-%E6%94%B9%E5%AD%98%E6%AA%94%E5%90%8D%E7%A8%B1%E8%AB%8B%E7%95%99%E6%84%8F%E4%B8%80%E4%B8%8B-level-dat/><span class=title>Next »</span><br><span>Minecraft 改存檔名稱，請留意一下 level.dat...</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://nesquate.tw/blog>美代子隨筆</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>