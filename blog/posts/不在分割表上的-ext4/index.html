<!DOCTYPE html><html domain=nesquate.tw/blog lang=zh-tw><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon-192x192.png?hash=e8ff01469d" rel=icon type=image/png><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>不在分割表上的 ext4 - 美代子隨筆</title><meta content="不在分割表上的 ext4" property=og:title><meta content="我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。 最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。..." name=description><meta content="我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。 最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。..." property=og:description><meta content=summary_large_image name=twitter:card><meta content=@Nesquate name=twitter:site><meta content=@Nesquate name=twitter:creator><link href=https://nesquate.tw/blog/posts/不在分割表上的-ext4/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/blog/feed/feed.xml rel=alternate type=application/atom+xml title=美代子隨筆><link href=/ rel=preconnect crossorigin=""><link href=/fonts/Inter-3.19.var.woff2 rel=preload type=font/woff2 as=font crossorigin=""><script async defer src="/js/min.js?hash=8db32dcb3a"></script><script csp-hash="">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #055eb1;--primary-dark: #000000;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{position:fixed;padding:.375em .5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}#nav{z-index:2;position:relative}#reading-progress,header nav{z-index:1;width:100vw;left:0;top:0}#reading-progress{background-color:var(--primary);height:3px;position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}@font-face{font-display:optional;font-family:"Inter UI";font-weight:100 900;font-style:oblique 0deg 10deg;src:url(/fonts/Inter-3.19.var.woff2) format("woff2")}button,html{line-height:1.15}html{-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem;line-height:2.4rem;margin-bottom:1.36rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}b{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;overflow:visible;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}body,p{font-size:1em}p{margin-bottom:1.5em;margin-bottom:1.36rem}body,p{font-size:1rem;line-height:1.6}@media (min-width:600px){h1{font-size:2.3978rem;line-height:2.4rem}body,p{font-size:1.1rem;line-height:1.6}h1,p{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:3.0756rem;line-height:4.72rem}body,p{font-size:1.2rem;line-height:1.6}h1,p{margin-bottom:.632rem}}table{display:table}button,code{border-radius:.3em}code,table{overflow-x:auto}code{color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}h1{font-family:var(--font-family)}a:hover{text-decoration:underline}@media (max-width:767px){x:-moz-any-link{display:table-cell}}button{max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family)}body{background:#fff;color:#000}header{padding:1.5em 1.5em 1em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p{margin-top:0}header nav h1{float:left;font-size:1.6rem;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto}footer{background:rgba(217,217,217,.264);color:#000;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:.5em;width:37.5em;margin:0 auto}blockquote{border-left:1px solid #f9c412;padding:0 1.5em;margin:1.5em 0 1.5em 1.5em;border-left:1px solid var(--primary)}blockquote footer{background:0 0;display:block;color:#ccc;padding:.75em 0;font-size:90%;text-align:start}</style><header><nav><div id=nav><h1><a href=/blog/ title=Homepage>美代子隨筆</a></h1><a href=/blog/about/ >關於</a></div><div id=reading-progress aria-hidden=true></div></nav><h1>不在分割表上的 ext4</h1><dialog id=message></dialog></header><main><article><p>我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。<p>最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。<p>因為自己不記得自己曾經幹了啥事，所以直接回到 Linux 去看發生什麼事。<p>首先是 GParted，發現怎麼縮小分割，最後都會變成最大（嘗試 e2fsck 後都會跑 resize2fs，超怪），然後就跑去 Google 一下 ext4 without partition table 的狀況，找到這篇 <a href=https://unix.stackexchange.com/questions/346826/is-it-ok-to-mkfs-without-partition-number title=StackExchange>StackExchange</a>，裡面的最佳解答如下：<blockquote><p>Creating a filesystem on a whole disk rather than a partition is possible, but unusual. The documentation only explicitly mentions the partition because that's the most usual case (it does say usually). You can create a filesystem on anything that acts sufficiently like a fixed-size file, i.e. something where if you write data at a certain location and read back from the same location then you get back the same data. This includes whole disks, disk partitions, and other kinds of block devices, as well as regular files (disk images).<p>After doing mkfs.fat -n A /dev/sdb, you no longer have a partition on that disk. Beware that the kernel still thinks that the disk has a partition, because it keeps the partition table cached in memory. But you shouldn't try to use /dev/sdb1 anymore, since it no longer exists; writing to it would corrupt the filesystem you created on /dev/sdb since /dev/sdb1 is a part of /dev/sdb (everything except a few hundred bytes at the beginning). Run the command partprobe as root to tell the kernel to re-read the partition table.<p>While creating a filesystem on a whole disk is possible, I don't recommend it. Some operating systems may have problems with it (I think Windows would cope but some devices such as cameras might not), and you lose the possibility of creating other partitions. See also <a href=https://unix.stackexchange.com/questions/14010/the-merits-of-a-partitionless-filesystem>The merits of a partitionless filesystem</a></blockquote><p>再點進去解答者提供的連結，看了一下，原來 Oracle VM 也這樣幹...。<p>後來去 <code>lsblk</code> 看一下，<code>sda</code> 後面沒號碼是直接整個掛起來的：<p><a href=/2022/08/Screenshot_20220821_200036.png><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/2022/08/Screenshot_20220821_200036-1920w.avif 1920w, /img/2022/08/Screenshot_20220821_200036-1280w.avif 1280w, /img/2022/08/Screenshot_20220821_200036-640w.avif 640w, /img/2022/08/Screenshot_20220821_200036-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/2022/08/Screenshot_20220821_200036-1920w.webp 1920w, /img/2022/08/Screenshot_20220821_200036-1280w.webp 1280w, /img/2022/08/Screenshot_20220821_200036-640w.webp 640w, /img/2022/08/Screenshot_20220821_200036-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/2022/08/Screenshot_20220821_200036-1920w.png 1920w, /img/2022/08/Screenshot_20220821_200036-1280w.png 1280w, /img/2022/08/Screenshot_20220821_200036-640w.png 640w, /img/2022/08/Screenshot_20220821_200036-320w.png 320w" type=image/png><img alt="" decoding=async height=324 loading=lazy src=/img/2022/08/Screenshot_20220821_200036-1920w.png style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 655 324'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAIAAAAcxIEBAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAhUlEQVQImT3CWxaCIBAAUNaiAU5C4gyvEaw8Sdr+N9Sf91wxpwDGTEgYIsXEpXKpFFPILAfopBI+Jg3jTJ7rmktd31s7zv04P+37mFEOICZEMDZk5lJD5gnRkXdEYCwYq++jSLw48hgil5p4AWN7pTuprqKdv21vjqg8X7lUR/6mh17p6x8QiCBeL/Q49AAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=655></picture></a><p>然後再去 <code>/etc/fstab</code> 看一下，因為我當初直接用 GNOME 提供的磁碟工具來掛載，不知道裡面寫了啥，所以要檢查一下：<p><a href=/2022/08/Screenshot_20220821_200154.png><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/2022/08/Screenshot_20220821_200154-1920w.avif 1920w, /img/2022/08/Screenshot_20220821_200154-1280w.avif 1280w, /img/2022/08/Screenshot_20220821_200154-640w.avif 640w, /img/2022/08/Screenshot_20220821_200154-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/2022/08/Screenshot_20220821_200154-1920w.webp 1920w, /img/2022/08/Screenshot_20220821_200154-1280w.webp 1280w, /img/2022/08/Screenshot_20220821_200154-640w.webp 640w, /img/2022/08/Screenshot_20220821_200154-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/2022/08/Screenshot_20220821_200154-1920w.png 1920w, /img/2022/08/Screenshot_20220821_200154-1280w.png 1280w, /img/2022/08/Screenshot_20220821_200154-640w.png 640w, /img/2022/08/Screenshot_20220821_200154-320w.png 320w" type=image/png><img alt="" decoding=async height=209 loading=lazy src=/img/2022/08/Screenshot_20220821_200154-1920w.png style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1131 209'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAADCAIAAAARJsg+AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAbElEQVQImW3EyQ0DIQwAQFrhPoxt7CXAKum/rkj5ZqXRGD/YCjtl99sOcoS+dwdgAVwu4YnxUwtpbBgBA3LikQgD9SjclGqtLmX/x+C5Jx8de8oRWuu15bq6in7u9d4q2lkKYkLICLlDQyoFv5KxG2rx9DKcAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&#34;)" width=1131></picture></a><p>好吧，當初用 UUID 的方式掛起來。不過我對我當初怎麼分割成這樣已經完全沒有任何印象了 lol<p>發布時間： <time datetime=2022-08-21>2022-08-21</time></p><share-widget><button aria-label=Share href=https://nesquate.tw/blog/posts/不在分割表上的-ext4/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"不在分割表上的 ext4","image":["https://nesquate.tw/blog/img/2022/08/Screenshot_20220821_200036-1920w.png","https://nesquate.tw/blog/img/2022/08/Screenshot_20220821_200154-1920w.png"],"author":"Nesquate","genre":"Insert a schema.org genre","publisher":{"@type":"Organization","name":"Nesquate","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-192x192.png?hash=e8ff01469d"}},"url":"https://nesquate.tw/blog/posts/不在分割表上的-ext4/","mainEntityOfPage":"https://nesquate.tw/blog/posts/不在分割表上的-ext4/","datePublished":"2022-08-21","dateModified":"Invalid DateTime","description":"我已經忘記我當初是怎麼分割資料碟了，只知道是跟 EndeavourOS 安裝的時候一起格式化。 最近因為遊戲需求逐漸增加而把 Windows 灌回自己的 Laptop，把兩顆硬碟都分一半，結果在 Windows 操作磁碟工具時提示「磁碟初始化」的訊息。..."}</script></article></main><footer><a href=/about/ >Nesquate</a></footer>