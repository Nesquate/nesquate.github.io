<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Minecraft Fabric Server Mod 開發筆記 - (1) Mod 生命週期 | 美代子隨筆</title><meta name=keywords content="Minecraft"><meta name=description content="Fabric API 新版 Lifecycle 的幾個比較重要的生命週期（依照 println() （Kotlin) 印出結果來記錄）
ServerLifecycleEvents.SERVER_STARTING: 發生在 &ldquo;Starting minecraft server version xxx&rdquo; 之前，在 Fabric Loader 載入之後 官方在相關 class 檔案內的註解為在 PlayerManager 載入之前 (PlayerManager 用來載入 OP、黑白名單等玩家相關名單) 猜測適用於自訂方塊載入、可能對存檔內容初始化有影響的內容 ServerLifecycleEvents.SERVER_STARTED: 發生在 &ldquo;Done (x.xxxs)! For help, type &ldquo;help&#34;&ldquo;之後 官方表示此時存檔已經載入完畢 猜測適用於管理玩家、存檔後續設定、網路相關服務的啟動等內容 ServerLifecycleEvents.SERVER_STOPPING: 在觸發 /stop 指令後的瞬間發生 官方表示此時網路連線並未中斷，存檔、玩家資料等仍可以進行操作 猜測適用於停止網路相關服務、針對伺服器停止時玩家的行為等內容 ServerLifecycleEvents.SERVER_STOPPED: 發生於存檔已經儲存完畢之時 官方表示此時存檔、玩家資料等已經無法再存取 猜測適用於非常底層的卸載動作 (不在任何生命週期內) 發生於 datafixer 載入後的瞬間 目前我還不知道這週期可以做什麼 onInitialize() 的程式碼：
override fun onInitialize() { ServerLifecycleEvents.SERVER_STARTING.register { server: MinecraftServer -> println(&#34;Happened on server starting&#34;) } ServerLifecycleEvents.SERVER_STARTED.register { server: MinecraftServer -> println(&#34;Happened on server started&#34;) } ServerLifecycleEvents."><meta name=author content="Nesquate"><link rel=canonical href=https://nesquate.tw/blog/posts/minecraft-fabric-server-mod-%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98-1-mod-%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://nesquate.tw/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nesquate.tw/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nesquate.tw/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://nesquate.tw/blog/apple-touch-icon.png><link rel=mask-icon href=https://nesquate.tw/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Minecraft Fabric Server Mod 開發筆記 - (1) Mod 生命週期"><meta property="og:description" content="Fabric API 新版 Lifecycle 的幾個比較重要的生命週期（依照 println() （Kotlin) 印出結果來記錄）
ServerLifecycleEvents.SERVER_STARTING: 發生在 &ldquo;Starting minecraft server version xxx&rdquo; 之前，在 Fabric Loader 載入之後 官方在相關 class 檔案內的註解為在 PlayerManager 載入之前 (PlayerManager 用來載入 OP、黑白名單等玩家相關名單) 猜測適用於自訂方塊載入、可能對存檔內容初始化有影響的內容 ServerLifecycleEvents.SERVER_STARTED: 發生在 &ldquo;Done (x.xxxs)! For help, type &ldquo;help&#34;&ldquo;之後 官方表示此時存檔已經載入完畢 猜測適用於管理玩家、存檔後續設定、網路相關服務的啟動等內容 ServerLifecycleEvents.SERVER_STOPPING: 在觸發 /stop 指令後的瞬間發生 官方表示此時網路連線並未中斷，存檔、玩家資料等仍可以進行操作 猜測適用於停止網路相關服務、針對伺服器停止時玩家的行為等內容 ServerLifecycleEvents.SERVER_STOPPED: 發生於存檔已經儲存完畢之時 官方表示此時存檔、玩家資料等已經無法再存取 猜測適用於非常底層的卸載動作 (不在任何生命週期內) 發生於 datafixer 載入後的瞬間 目前我還不知道這週期可以做什麼 onInitialize() 的程式碼：
override fun onInitialize() { ServerLifecycleEvents.SERVER_STARTING.register { server: MinecraftServer -> println(&#34;Happened on server starting&#34;) } ServerLifecycleEvents.SERVER_STARTED.register { server: MinecraftServer -> println(&#34;Happened on server started&#34;) } ServerLifecycleEvents."><meta property="og:type" content="article"><meta property="og:url" content="https://nesquate.tw/blog/posts/minecraft-fabric-server-mod-%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98-1-mod-%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F/"><meta property="og:image" content="https://nesquate.tw/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-28T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-28T00:00:00+00:00"><meta property="og:site_name" content="美代子隨筆"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nesquate.tw/blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Minecraft Fabric Server Mod 開發筆記 - (1) Mod 生命週期"><meta name=twitter:description content="Fabric API 新版 Lifecycle 的幾個比較重要的生命週期（依照 println() （Kotlin) 印出結果來記錄）
ServerLifecycleEvents.SERVER_STARTING: 發生在 &ldquo;Starting minecraft server version xxx&rdquo; 之前，在 Fabric Loader 載入之後 官方在相關 class 檔案內的註解為在 PlayerManager 載入之前 (PlayerManager 用來載入 OP、黑白名單等玩家相關名單) 猜測適用於自訂方塊載入、可能對存檔內容初始化有影響的內容 ServerLifecycleEvents.SERVER_STARTED: 發生在 &ldquo;Done (x.xxxs)! For help, type &ldquo;help&#34;&ldquo;之後 官方表示此時存檔已經載入完畢 猜測適用於管理玩家、存檔後續設定、網路相關服務的啟動等內容 ServerLifecycleEvents.SERVER_STOPPING: 在觸發 /stop 指令後的瞬間發生 官方表示此時網路連線並未中斷，存檔、玩家資料等仍可以進行操作 猜測適用於停止網路相關服務、針對伺服器停止時玩家的行為等內容 ServerLifecycleEvents.SERVER_STOPPED: 發生於存檔已經儲存完畢之時 官方表示此時存檔、玩家資料等已經無法再存取 猜測適用於非常底層的卸載動作 (不在任何生命週期內) 發生於 datafixer 載入後的瞬間 目前我還不知道這週期可以做什麼 onInitialize() 的程式碼：
override fun onInitialize() { ServerLifecycleEvents.SERVER_STARTING.register { server: MinecraftServer -> println(&#34;Happened on server starting&#34;) } ServerLifecycleEvents.SERVER_STARTED.register { server: MinecraftServer -> println(&#34;Happened on server started&#34;) } ServerLifecycleEvents."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nesquate.tw/blog/posts/"},{"@type":"ListItem","position":3,"name":"Minecraft Fabric Server Mod 開發筆記 - (1) Mod 生命週期","item":"https://nesquate.tw/blog/posts/minecraft-fabric-server-mod-%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98-1-mod-%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Minecraft Fabric Server Mod 開發筆記 - (1) Mod 生命週期","name":"Minecraft Fabric Server Mod 開發筆記 - (1) Mod 生命週期","description":"Fabric API 新版 Lifecycle 的幾個比較重要的生命週期（依照 println() （Kotlin) 印出結果來記錄）\nServerLifecycleEvents.SERVER_STARTING: 發生在 \u0026ldquo;Starting minecraft server version xxx\u0026rdquo; 之前，在 Fabric Loader 載入之後 官方在相關 class 檔案內的註解為在 PlayerManager 載入之前 (PlayerManager 用來載入 OP、黑白名單等玩家相關名單) 猜測適用於自訂方塊載入、可能對存檔內容初始化有影響的內容 ServerLifecycleEvents.SERVER_STARTED: 發生在 \u0026ldquo;Done (x.xxxs)! For help, type \u0026ldquo;help\u0026quot;\u0026ldquo;之後 官方表示此時存檔已經載入完畢 猜測適用於管理玩家、存檔後續設定、網路相關服務的啟動等內容 ServerLifecycleEvents.SERVER_STOPPING: 在觸發 /stop 指令後的瞬間發生 官方表示此時網路連線並未中斷，存檔、玩家資料等仍可以進行操作 猜測適用於停止網路相關服務、針對伺服器停止時玩家的行為等內容 ServerLifecycleEvents.SERVER_STOPPED: 發生於存檔已經儲存完畢之時 官方表示此時存檔、玩家資料等已經無法再存取 猜測適用於非常底層的卸載動作 (不在任何生命週期內) 發生於 datafixer 載入後的瞬間 目前我還不知道這週期可以做什麼 onInitialize() 的程式碼：\noverride fun onInitialize() { ServerLifecycleEvents.SERVER_STARTING.register { server: MinecraftServer -\u0026gt; println(\u0026#34;Happened on server starting\u0026#34;) } ServerLifecycleEvents.SERVER_STARTED.register { server: MinecraftServer -\u0026gt; println(\u0026#34;Happened on server started\u0026#34;) } ServerLifecycleEvents.","keywords":["Minecraft"],"articleBody":"Fabric API 新版 Lifecycle 的幾個比較重要的生命週期（依照 println() （Kotlin) 印出結果來記錄）\nServerLifecycleEvents.SERVER_STARTING: 發生在 “Starting minecraft server version xxx” 之前，在 Fabric Loader 載入之後 官方在相關 class 檔案內的註解為在 PlayerManager 載入之前 (PlayerManager 用來載入 OP、黑白名單等玩家相關名單) 猜測適用於自訂方塊載入、可能對存檔內容初始化有影響的內容 ServerLifecycleEvents.SERVER_STARTED: 發生在 “Done (x.xxxs)! For help, type “help\"“之後 官方表示此時存檔已經載入完畢 猜測適用於管理玩家、存檔後續設定、網路相關服務的啟動等內容 ServerLifecycleEvents.SERVER_STOPPING: 在觸發 /stop 指令後的瞬間發生 官方表示此時網路連線並未中斷，存檔、玩家資料等仍可以進行操作 猜測適用於停止網路相關服務、針對伺服器停止時玩家的行為等內容 ServerLifecycleEvents.SERVER_STOPPED: 發生於存檔已經儲存完畢之時 官方表示此時存檔、玩家資料等已經無法再存取 猜測適用於非常底層的卸載動作 (不在任何生命週期內) 發生於 datafixer 載入後的瞬間 目前我還不知道這週期可以做什麼 onInitialize() 的程式碼：\noverride fun onInitialize() { ServerLifecycleEvents.SERVER_STARTING.register { server: MinecraftServer -\u003e println(\"Happened on server starting\") } ServerLifecycleEvents.SERVER_STARTED.register { server: MinecraftServer -\u003e println(\"Happened on server started\") } ServerLifecycleEvents.SERVER_STOPPING.register { server: MinecraftServer -\u003e println(\"Happened on server stopping\") } ServerLifecycleEvents.SERVER_STOPPED.register { server: MinecraftServer -\u003e println(\"Happened on server stopped\") } println(\"Hello world!\") } 輸出結果:\n[14:00:14] [main/INFO] (FabricLoader/GameProvider) Loading Minecraft 1.19 with Fabric Loader 0.14.8 [14:00:14] [main/INFO] (FabricLoader) Loading 37 mods: - dimmanager 0.1.0 - fabric 0.58.0+1.19 - fabric-api-base 0.4.9+e62f51a3a9 - fabric-api-lookup-api-v1 1.6.7+9ff28f40a9 - fabric-biome-api-v1 9.0.14+b2a4a624a9 - fabric-command-api-v2 2.1.2+0d55f585a9 - fabric-content-registries-v0 3.2.1+07df213ea9 - fabric-convention-tags-v1 1.0.8+37622d24a9 - fabric-crash-report-info-v1 0.2.3+bd0a0d4aa9 - fabric-data-generation-api-v1 5.1.2+a680b9b4a9 - fabric-dimensions-v1 2.1.28+a6d2f785a9 - fabric-entity-events-v1 1.4.16+9ff28f40a9 - fabric-events-interaction-v0 0.4.26+9ff28f40a9 - fabric-game-rule-api-v1 1.0.19+18990361a9 - fabric-gametest-api-v1 1.0.33+e62f51a3a9 - fabric-item-api-v1 1.5.5+35a03c43a9 - fabric-item-groups-v0 0.3.26+9ff28f40a9 - fabric-language-kotlin 1.8.2+kotlin.1.7.10 - fabric-lifecycle-events-v1 2.1.0+33fbc738a9 - fabric-loot-api-v2 1.1.1+03a4e568a9 - fabric-message-api-v1 1.0.1+513f4a59a9 - fabric-mining-level-api-v1 2.1.11+33fbc738a9 - fabric-networking-api-v1 1.1.0+442de8b8a9 - fabric-object-builder-api-v1 4.0.8+9ff28f40a9 - fabric-particles-v1 1.0.8+dc39553aa9 - fabric-registry-sync-v0 0.9.18+23c4cfefa9 - fabric-rendering-data-attachment-v1 0.3.12+9ff28f40a9 - fabric-rendering-fluids-v1 3.0.5+9ff28f40a9 - fabric-resource-conditions-api-v1 2.0.9+e62f51a3a9 - fabric-resource-loader-v0 0.5.6+5f1a85e0a9 - fabric-screen-handler-api-v1 1.2.7+9ff28f40a9 - fabric-transfer-api-v1 2.0.9+e62f51a3a9 - fabric-transitive-access-wideners-v1 1.1.1+9e7660c6a9 - fabricloader 0.14.8 - fantasy 0.4.5+1.19 - java 17 - minecraft 1.19 [14:00:14] [main/INFO] (FabricLoader/Mixin) SpongePowered MIXIN Subsystem Version=0.8.5 Source=file:/home/nesquate/.gradle/caches/modules-2/files-2.1/net.fabricmc/sponge-mixin/0.11.4+mixin.0.8.5/c1dc27696aa4006e492c2485c9ccbcb26045a971/sponge-mixin-0.11.4+mixin.0.8.5.jar Service=Knot/Fabric Env=SERVER [14:00:15] [main/INFO] (FabricLoader/Mixin) Loaded Fabric development mappings for mixin remapper! [14:00:15] [main/INFO] (FabricLoader/Mixin) Compatibility level set to JAVA_16 [14:00:15] [main/INFO] (FabricLoader/Mixin) Compatibility level set to JAVA_17 [14:00:16] [main/WARN] (FileUtil) Configuration conflict: there is more than one oshi.properties file on the classpath [14:00:16] [main/WARN] (FileUtil) Configuration conflict: there is more than one oshi.architecture.properties file on the classpath [14:00:19] [main/INFO] (Minecraft) Building unoptimized datafixer [14:00:22] [main/INFO] (Minecraft) [STDOUT]: Hello world! [14:00:22] [main/INFO] (Minecraft) Environment: authHost='https://authserver.mojang.com', accountsHost='https://api.mojang.com', sessionHost='https://sessionserver.mojang.com', servicesHost='https://api.minecraftservices.com', name='PROD' [14:00:24] [main/INFO] (Minecraft) Loaded 7 recipes [14:00:25] [main/INFO] (Minecraft) Loaded 1179 advancements [14:00:26] [main/INFO] (BiomeModificationImpl) Applied 0 biome modifications to 0 of 63 new biomes in 3.226 ms [14:00:26] [Server thread/INFO] (Minecraft) [STDOUT]: Happened on server starting [14:00:26] [Server thread/INFO] (Minecraft) Starting minecraft server version 1.19 [14:00:26] [Server thread/INFO] (Minecraft) Loading properties [14:00:26] [Server thread/INFO] (Minecraft) Default game type: SURVIVAL [14:00:26] [Server thread/INFO] (Minecraft) Generating keypair [14:00:26] [Server thread/INFO] (Minecraft) Starting Minecraft server on *:25565 [14:00:26] [Server thread/INFO] (Minecraft) Using epoll channel type [14:00:26] [Server thread/INFO] (Minecraft) Preparing level \"world\" [14:00:26] [Server thread/INFO] (Minecraft) Preparing start region for dimension minecraft:overworld [14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0% [14:00:30] [Worker-Main-5/INFO] (Minecraft) Preparing spawn area: 0% [14:00:30] [Worker-Main-5/INFO] (Minecraft) Preparing spawn area: 0% [14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0% [14:00:30] [Worker-Main-4/INFO] (Minecraft) Preparing spawn area: 0% [14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0% [14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0% [14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0% [14:00:30] [Worker-Main-3/INFO] (Minecraft) Preparing spawn area: 31% [14:00:31] [Worker-Main-4/INFO] (Minecraft) Preparing spawn area: 93% [14:00:31] [Server thread/INFO] (Minecraft) Time elapsed: 4557 ms [14:00:31] [Server thread/INFO] (Minecraft) Done (4.925s)! For help, type \"help\" [14:00:31] [Server thread/INFO] (Minecraft) [STDOUT]: Happened on server started stop [14:08:03] [Server thread/INFO] (Minecraft) Stopping the server [14:08:03] [Server thread/INFO] (Minecraft) [STDOUT]: Happened on server stopping [14:08:03] [Server thread/INFO] (Minecraft) Stopping server [14:08:03] [Server thread/INFO] (Minecraft) Saving players [14:08:03] [Server thread/INFO] (Minecraft) Saving worlds [14:08:04] [Server thread/INFO] (Minecraft) Saving chunks for level 'ServerLevel[world]'/minecraft:overworld [14:08:05] [Server thread/INFO] (Minecraft) Saving chunks for level 'ServerLevel[world]'/minecraft:the_end [14:08:05] [Server thread/INFO] (Minecraft) Saving chunks for level 'ServerLevel[world]'/minecraft:the_nether [14:08:05] [Server thread/INFO] (Minecraft) ThreadedAnvilChunkStorage (world): All chunks are saved [14:08:05] [Server thread/INFO] (Minecraft) ThreadedAnvilChunkStorage (DIM1): All chunks are saved [14:08:05] [Server thread/INFO] (Minecraft) ThreadedAnvilChunkStorage (DIM-1): All chunks are saved [14:08:05] [Server thread/INFO] (Minecraft) ThreadedAnvilChunkStorage: All dimensions are saved [14:08:05] [Server thread/INFO] (Minecraft) [STDOUT]: Happened on server stopped 了解這些生命週期可以讓我順利取得 Server 的實體，以便進行後續的 Coding。\n","wordCount":"628","inLanguage":"en","datePublished":"2022-07-28T00:00:00Z","dateModified":"2022-07-28T00:00:00Z","author":{"@type":"Person","name":"Nesquate"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nesquate.tw/blog/posts/minecraft-fabric-server-mod-%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98-1-mod-%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F/"},"publisher":{"@type":"Organization","name":"美代子隨筆","logo":{"@type":"ImageObject","url":"https://nesquate.tw/blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nesquate.tw/blog accesskey=h title="美代子隨筆 (Alt + H)"><img src=https://nesquate.tw/blog/apple-touch-icon.png alt aria-label=logo height=35>美代子隨筆</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nesquate.tw/blog/archives/ title=彙整><span>彙整</span></a></li><li><a href=https://nesquate.tw/blog/categories/ title=分類><span>分類</span></a></li><li><a href=https://nesquate.tw/blog/tags/ title=標籤><span>標籤</span></a></li><li><a href=https://nesquate.tw/blog/about/ title=關於><span>關於</span></a></li><li><a href=https://nesquate.tw/blog/search/ title="搜尋 (Alt + /)" accesskey=/><span>搜尋</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Minecraft Fabric Server Mod 開發筆記 - (1) Mod 生命週期</h1><div class=post-meta><span title='2022-07-28 00:00:00 +0000 UTC'>July 28, 2022</span>&nbsp;·&nbsp;Nesquate</div></header><div class=post-content><p>Fabric API 新版 Lifecycle 的幾個比較重要的生命週期（依照 <code>println()</code> （Kotlin) 印出結果來記錄）</p><ul><li><code>ServerLifecycleEvents.SERVER_STARTING</code>:<ul><li>發生在 &ldquo;Starting minecraft server version xxx&rdquo; 之前，在 Fabric Loader 載入之後</li><li>官方在相關 class 檔案內的註解為在 <code>PlayerManager</code> 載入之前 (<code>PlayerManager</code> 用來載入 OP、黑白名單等玩家相關名單)</li><li>猜測適用於自訂方塊載入、可能對存檔內容初始化有影響的內容</li></ul></li><li><code>ServerLifecycleEvents.SERVER_STARTED</code>:<ul><li>發生在 &ldquo;Done (x.xxxs)! For help, type &ldquo;help"&ldquo;之後</li><li>官方表示此時存檔已經載入完畢</li><li>猜測適用於管理玩家、存檔後續設定、網路相關服務的啟動等內容</li></ul></li><li><code>ServerLifecycleEvents.SERVER_STOPPING</code>:<ul><li>在觸發 <code>/stop</code> 指令後的瞬間發生</li><li>官方表示此時網路連線並未中斷，存檔、玩家資料等仍可以進行操作</li><li>猜測適用於停止網路相關服務、針對伺服器停止時玩家的行為等內容</li></ul></li><li><code>ServerLifecycleEvents.SERVER_STOPPED</code>:<ul><li>發生於存檔已經儲存完畢之時</li><li>官方表示此時存檔、玩家資料等已經無法再存取</li><li>猜測適用於非常底層的卸載動作</li></ul></li><li><code>(不在任何生命週期內)</code><ul><li>發生於 datafixer 載入後的瞬間</li><li>目前我還不知道這週期可以做什麼</li></ul></li></ul><p><code>onInitialize()</code> 的程式碼：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>override</span> <span class=k>fun</span> <span class=nf>onInitialize</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nc>ServerLifecycleEvents</span><span class=p>.</span><span class=nc>SERVER_STARTING</span><span class=p>.</span><span class=n>register</span> <span class=p>{</span> <span class=n>server</span><span class=p>:</span> <span class=n>MinecraftServer</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=n>println</span><span class=p>(</span><span class=s2>&#34;Happened on server starting&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nc>ServerLifecycleEvents</span><span class=p>.</span><span class=nc>SERVER_STARTED</span><span class=p>.</span><span class=n>register</span> <span class=p>{</span> <span class=n>server</span><span class=p>:</span> <span class=n>MinecraftServer</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=n>println</span><span class=p>(</span><span class=s2>&#34;Happened on server started&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nc>ServerLifecycleEvents</span><span class=p>.</span><span class=nc>SERVER_STOPPING</span><span class=p>.</span><span class=n>register</span> <span class=p>{</span> <span class=n>server</span><span class=p>:</span> <span class=n>MinecraftServer</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=n>println</span><span class=p>(</span><span class=s2>&#34;Happened on server stopping&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nc>ServerLifecycleEvents</span><span class=p>.</span><span class=nc>SERVER_STOPPED</span><span class=p>.</span><span class=n>register</span> <span class=p>{</span> <span class=n>server</span><span class=p>:</span> <span class=n>MinecraftServer</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=n>println</span><span class=p>(</span><span class=s2>&#34;Happened on server stopped&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>println</span><span class=p>(</span><span class=s2>&#34;Hello world!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>輸出結果:</p><pre tabindex=0><code class=language-log data-lang=log>[14:00:14] [main/INFO] (FabricLoader/GameProvider) Loading Minecraft 1.19 with Fabric Loader 0.14.8
[14:00:14] [main/INFO] (FabricLoader) Loading 37 mods:
    - dimmanager 0.1.0
    - fabric 0.58.0+1.19
    - fabric-api-base 0.4.9+e62f51a3a9
    - fabric-api-lookup-api-v1 1.6.7+9ff28f40a9
    - fabric-biome-api-v1 9.0.14+b2a4a624a9
    - fabric-command-api-v2 2.1.2+0d55f585a9
    - fabric-content-registries-v0 3.2.1+07df213ea9
    - fabric-convention-tags-v1 1.0.8+37622d24a9
    - fabric-crash-report-info-v1 0.2.3+bd0a0d4aa9
    - fabric-data-generation-api-v1 5.1.2+a680b9b4a9
    - fabric-dimensions-v1 2.1.28+a6d2f785a9
    - fabric-entity-events-v1 1.4.16+9ff28f40a9
    - fabric-events-interaction-v0 0.4.26+9ff28f40a9
    - fabric-game-rule-api-v1 1.0.19+18990361a9
    - fabric-gametest-api-v1 1.0.33+e62f51a3a9
    - fabric-item-api-v1 1.5.5+35a03c43a9
    - fabric-item-groups-v0 0.3.26+9ff28f40a9
    - fabric-language-kotlin 1.8.2+kotlin.1.7.10
    - fabric-lifecycle-events-v1 2.1.0+33fbc738a9
    - fabric-loot-api-v2 1.1.1+03a4e568a9
    - fabric-message-api-v1 1.0.1+513f4a59a9
    - fabric-mining-level-api-v1 2.1.11+33fbc738a9
    - fabric-networking-api-v1 1.1.0+442de8b8a9
    - fabric-object-builder-api-v1 4.0.8+9ff28f40a9
    - fabric-particles-v1 1.0.8+dc39553aa9
    - fabric-registry-sync-v0 0.9.18+23c4cfefa9
    - fabric-rendering-data-attachment-v1 0.3.12+9ff28f40a9
    - fabric-rendering-fluids-v1 3.0.5+9ff28f40a9
    - fabric-resource-conditions-api-v1 2.0.9+e62f51a3a9
    - fabric-resource-loader-v0 0.5.6+5f1a85e0a9
    - fabric-screen-handler-api-v1 1.2.7+9ff28f40a9
    - fabric-transfer-api-v1 2.0.9+e62f51a3a9
    - fabric-transitive-access-wideners-v1 1.1.1+9e7660c6a9
    - fabricloader 0.14.8
    - fantasy 0.4.5+1.19
    - java 17
    - minecraft 1.19
[14:00:14] [main/INFO] (FabricLoader/Mixin) SpongePowered MIXIN Subsystem Version=0.8.5 Source=file:/home/nesquate/.gradle/caches/modules-2/files-2.1/net.fabricmc/sponge-mixin/0.11.4+mixin.0.8.5/c1dc27696aa4006e492c2485c9ccbcb26045a971/sponge-mixin-0.11.4+mixin.0.8.5.jar Service=Knot/Fabric Env=SERVER
[14:00:15] [main/INFO] (FabricLoader/Mixin) Loaded Fabric development mappings for mixin remapper!
[14:00:15] [main/INFO] (FabricLoader/Mixin) Compatibility level set to JAVA_16
[14:00:15] [main/INFO] (FabricLoader/Mixin) Compatibility level set to JAVA_17
[14:00:16] [main/WARN] (FileUtil) Configuration conflict: there is more than one oshi.properties file on the classpath
[14:00:16] [main/WARN] (FileUtil) Configuration conflict: there is more than one oshi.architecture.properties file on the classpath
[14:00:19] [main/INFO] (Minecraft) Building unoptimized datafixer
[14:00:22] [main/INFO] (Minecraft) [STDOUT]: Hello world!
[14:00:22] [main/INFO] (Minecraft) Environment: authHost=&#39;https://authserver.mojang.com&#39;, accountsHost=&#39;https://api.mojang.com&#39;, sessionHost=&#39;https://sessionserver.mojang.com&#39;, servicesHost=&#39;https://api.minecraftservices.com&#39;, name=&#39;PROD&#39;
[14:00:24] [main/INFO] (Minecraft) Loaded 7 recipes
[14:00:25] [main/INFO] (Minecraft) Loaded 1179 advancements
[14:00:26] [main/INFO] (BiomeModificationImpl) Applied 0 biome modifications to 0 of 63 new biomes in 3.226 ms
[14:00:26] [Server thread/INFO] (Minecraft) [STDOUT]: Happened on server starting
[14:00:26] [Server thread/INFO] (Minecraft) Starting minecraft server version 1.19
[14:00:26] [Server thread/INFO] (Minecraft) Loading properties
[14:00:26] [Server thread/INFO] (Minecraft) Default game type: SURVIVAL
[14:00:26] [Server thread/INFO] (Minecraft) Generating keypair
[14:00:26] [Server thread/INFO] (Minecraft) Starting Minecraft server on *:25565
[14:00:26] [Server thread/INFO] (Minecraft) Using epoll channel type
[14:00:26] [Server thread/INFO] (Minecraft) Preparing level &#34;world&#34;
[14:00:26] [Server thread/INFO] (Minecraft) Preparing start region for dimension minecraft:overworld
[14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0%
[14:00:30] [Worker-Main-5/INFO] (Minecraft) Preparing spawn area: 0%
[14:00:30] [Worker-Main-5/INFO] (Minecraft) Preparing spawn area: 0%
[14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0%
[14:00:30] [Worker-Main-4/INFO] (Minecraft) Preparing spawn area: 0%
[14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0%
[14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0%
[14:00:30] [Worker-Main-1/INFO] (Minecraft) Preparing spawn area: 0%
[14:00:30] [Worker-Main-3/INFO] (Minecraft) Preparing spawn area: 31%
[14:00:31] [Worker-Main-4/INFO] (Minecraft) Preparing spawn area: 93%
[14:00:31] [Server thread/INFO] (Minecraft) Time elapsed: 4557 ms
[14:00:31] [Server thread/INFO] (Minecraft) Done (4.925s)! For help, type &#34;help&#34;
[14:00:31] [Server thread/INFO] (Minecraft) [STDOUT]: Happened on server started
stop
[14:08:03] [Server thread/INFO] (Minecraft) Stopping the server
[14:08:03] [Server thread/INFO] (Minecraft) [STDOUT]: Happened on server stopping
[14:08:03] [Server thread/INFO] (Minecraft) Stopping server
[14:08:03] [Server thread/INFO] (Minecraft) Saving players
[14:08:03] [Server thread/INFO] (Minecraft) Saving worlds
[14:08:04] [Server thread/INFO] (Minecraft) Saving chunks for level &#39;ServerLevel[world]&#39;/minecraft:overworld
[14:08:05] [Server thread/INFO] (Minecraft) Saving chunks for level &#39;ServerLevel[world]&#39;/minecraft:the_end
[14:08:05] [Server thread/INFO] (Minecraft) Saving chunks for level &#39;ServerLevel[world]&#39;/minecraft:the_nether
[14:08:05] [Server thread/INFO] (Minecraft) ThreadedAnvilChunkStorage (world): All chunks are saved
[14:08:05] [Server thread/INFO] (Minecraft) ThreadedAnvilChunkStorage (DIM1): All chunks are saved
[14:08:05] [Server thread/INFO] (Minecraft) ThreadedAnvilChunkStorage (DIM-1): All chunks are saved
[14:08:05] [Server thread/INFO] (Minecraft) ThreadedAnvilChunkStorage: All dimensions are saved
[14:08:05] [Server thread/INFO] (Minecraft) [STDOUT]: Happened on server stopped
</code></pre><p>了解這些生命週期可以讓我順利取得 Server 的實體，以便進行後續的 Coding。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://nesquate.tw/blog/tags/minecraft/>Minecraft</a></li></ul><nav class=paginav><a class=prev href=https://nesquate.tw/blog/posts/minecraft-%E6%94%B9%E5%AD%98%E6%AA%94%E5%90%8D%E7%A8%B1%E8%AB%8B%E7%95%99%E6%84%8F%E4%B8%80%E4%B8%8B-level-dat/><span class=title>« Prev</span><br><span>Minecraft 改存檔名稱，請留意一下 level.dat...</span></a>
<a class=next href=https://nesquate.tw/blog/posts/%E5%9C%A8-arch-linux-%E5%AE%89%E8%A3%9D%E6%9C%80%E6%96%B0%E7%89%88%E7%9A%84-line-%E7%B8%BD%E6%95%B4%E7%90%86/><span class=title>Next »</span><br><span>在 Arch Linux 安裝最新版的 LINE 總整理</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://nesquate.tw/blog>美代子隨筆</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>